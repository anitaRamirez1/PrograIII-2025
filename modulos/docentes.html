<form id="frmDocentes">
    <div class="card text-bg-dark" style="min-width: 700px;">
        <div class="card-header">ADMINISTRACION DE DOCENTES</div>
        <div class="card-body">
            <div class="row p-1">
                <div class="col-3 col-md-2">CODIGO</div>
                <div class="col-9 col-md-3">
                    <input required type="text" id="txtCodigoDocentes" name="txtCodigoDocentes" class="form-control form-control-sm" />
                </div>
            </div>
            <div class="row p-1">
                <div class="col-3 col-md-2">NOMBRE</div>
                <div class="col-9 col-md-4">
                    <input required type="text" id="txtNombreDocentes" name="txtNombreDocentes" class="form-control form-control-sm" />
                </div>
            </div>
            <div class="row p-1">
                <div class="col-3 col-md-2">DIRECCION</div>
                <div class="col-9 col-md-8">
                    <input required type="text" id="txtDireccionDocentes" name="txtDireccionDocentes" class="form-control form-control-sm" />
                </div>
            </div>
            <div class="row p-1">
                <div class="col-3 col-md-2">TELEFONO</div>
                <div class="col-9 col-md-3">
                    <input type="text" id="txtTelefonoDocentes" name="txtTelefonoDocentes" class="form-control form-control-sm" />
                </div>
            </div>
            <div class="row p-1">
                <div class="col-3 col-md-2">EMAIL</div>
                <div class="col-9 col-md-4">
                    <input type="email" id="txtEmailDocentes" name="txtEmailDocentes" class="form-control form-control-sm" />
                </div>
            </div>
             <div class="row p-1">
                <div class="col-3 col-md-2">DUI</div>
                <div class="col-9 col-md-4">
                    <input type="text" id="txtDuiDocentes" name="txtDuiDocentes" class="form-control form-control-sm" />
                </div>
            </div>

             <div class="row p-1">
                <div class="col-3 col-md-2">ESCALAFON</div>
                <div class="col-9 col-md-4">
                    <input type="text" id="txtEscalafonDocentes" name="txtEscalafonDocentes" class="form-control form-control-sm" />
                </div>
            </div>

        </div>
        <div class="card-footer text-center">
            <input type="submit" id="btnGuardarDocentes" name="btnGuardarDocentes" class="btn btn-primary" value="GUARDAR" />
            <input type="reset" id="btnNuevoDocentes" name="btnNuevoDocentes" class="btn btn-warning" value="NUEVO" />
            <input type="button" id="btnBuscarDocentes" name="btnBuscarDocentes" class="btn btn-info" value="BUSCAR" />
        </div>
    </div>
</form>
<script>
    var accion = "nuevo",
        idDocentes = 0;

    frmDocentes.addEventListener("submit",e=>{
        e.preventDefault();
        guardarDocentes();
    });
    async function guardarDocentes(){
        let datos = {
            accion,
            idDocentes,
            codigo: txtCodigoDocentes.value,
            nombre: txtNombreDocentes.value,
            direccion: txtDireccionDocentes.value,
            telefono: txtTelefonoDocentes.value,
            email: txtEmailDocentes.value,
            dui: txtDuiDocentes.value,
            escalafon: txtEscalafonDocentes.value
        };
        let response = await fetch("/docentes",{
            method: "POST",
            body: JSON.stringify(datos),
        }), 
            respuesta = await response.json();
        if(respuesta.msg!="ok"){
            alertify.error(`Error al procesar docentes: ${respuesta}`);
            return;
        }
        limpiarFormulario();
        obtenerDocentes();
    }
    function limpiarFormulario(){
        accion = "nuevo";
        idDocentes = 0;
        txtCodigoDocentes.value = "";
        txtNombreDocentes.value = "";
        txtDireccionDocentes.value = "";
        txtTelefonoDocentes.value = "";
        txtEmailDocentes.value = "";
        txtDuiDocentes.value = "";
        txtEscalafonDocentes.value = "";
    }
    function mostrarDocente(docentes){
        accion = "modificar";
        idDocentes = docentes.idDocentes;
        txtCodigoDocentes.value = docentes.codigo;
        txtNombreDocentes.value = docentes.nombre;
        txtDireccionDocentes.value = docentes.direccion;
        txtTelefonoDocentes.value = docentes.telefono;
        txtEmailDocentes.value = docentes.email;
        txtDuiDocentes.value = docentes.dui;
        txtEscalafonDocentes.value = docentes.escalafon;
    }
    btnBuscarDocentes.addEventListener("click", e=>{
        e.preventDefault();
        abrirVentana('busqueda_docentes');
    });
</script>
